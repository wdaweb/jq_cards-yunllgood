<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>countryName</title>
  <link rel="stylesheet" href="./css/bootstrap.css">
  <link rel="stylesheet" href="./css/style.css">
  <style>
    body {
      background: rgba(255, 255, 255,0.6);
    }
  </style>
</head>

<body>
  <div class="container-fluid">
    <div class="row">
      <div class="col-5 text-left">
        <div id="time">TIME:<span id="text-time">0 s</span></div>
      </div>
      <div class="col-7 text-right" style="padding: 0 30px;">
        <span>國旗 vs 國家名稱 </span>
      </div>
    </div>
    <div class="row">
      <div id="game" style="width: 100%; height:500px;"></div>
    </div>
    <div class="row d-flex align-items-center justify-content-center">
      <button class="btn-start" id="btn-start">start</button>
    </div>
  </div>

  </div>
  <script src="./js/jquery-3.6.0.min.js"></script>
  <script src="./js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

  <script>
    // 卡片共30張 i從0開始
    for (let i = 0; i < 30; i++) {
      $("#game").append(`
            <div class="card">
              <div class="card-back"></div>
              <div class="card-front"></div>
            </div>
          `);
    }

    // card圖案 國旗
    for (let i = 0; i < 30; i++) {
      const flag = i % (30 / 2) + 1
      $(".card").eq(i).find(".card-front").css("background-image", `url(../img/${flag}f.png)`);
      $(".card").eq(i).attr("data-card", flag);

    }

    // card圖案 國家名稱
    for (let i = 0; i < 30; i++) {
      const countryName = i % (30 / 2) + 1
      // i+15 從第15個開始
      $(".card").eq(i + 15).find(".card-front").css("background-image", `url(../img/${countryName}n.png)`);
      $(".card").eq(i + 15).attr("data-card", countryName);
    }

    // 打亂花色
    for (let i = 0; i < 30; i++) {
      let target = Math.floor(Math.random() * 15)
      $('.card').eq(target).insertAfter($('.card').eq(i))
    }

    $("#btn-start").click(function () {
      // 點擊開始按鈕後，停用開始按鈕
      $(this).attr("disabled", true);
      $("#btn-start").attr('src', './images/start-n.png')

      time = 0;
      $("#text-time").text(time);
      let timer = setInterval(function () {
        time++;
        $("#text-time").text(time + " s");
      }, 1000);

      $('#game').on('click', '.card', function () {
        // 最多只能翻兩張牌
        if ($('.card-open').length < 2 && !$(this).hasClass('card-open')) {
          $(this).addClass('card-open')
        }
        // 不能用else if，因為要同時去做
        // 如果翻開兩張了
        if ($('.card-open').length === 2) {
          // 如果兩張的數字一樣
          if ($('.card-open').eq(0).attr('data-card') === $('.card-open').eq(1).attr('data-card')) {
            // 淡出，使用 card-clear 標記已解決
            $('.card-open').fadeTo(500, 0).addClass('card-clear')
          }
          // 不管一不一樣都翻回來
          setTimeout(() => {
            $('.card-open').removeClass('card-open')
          }, 500);
          // 如果全部翻完
          if ($('.card-clear').length === 30) {
            Swal.fire({
              title: '恭喜過關'
            })
          }
        }
      })
    })


  </script>
</body>

</html>